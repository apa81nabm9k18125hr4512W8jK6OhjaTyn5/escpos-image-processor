"use strict";

var _common = require("test/common");

var fs = _interopRequireWildcard(require("fs"));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }

describe('Load PNG', function () {
  const tests = [// ['name', components, alpha, bitDepth]
  ['grey8', 1, 0, 8], ['grey16', 1, 0, 16], ['greya16', 1, 1, 8], ['greya32', 1, 1, 16], ['rgb24', 3, 0, 8], ['rgb48', 3, 0, 16], ['rgba32', 3, 1, 8], ['rgba64', 3, 1, 16], ['plt-4bpp', 3, 0, 8], ['plt-8bpp-color', 3, 0, 8]];
  tests.forEach(function (test) {
    it(`should load from path ${test[0]}`, function () {
      return (0, _common.load)(`format/png/${test[0]}.png`).then(function (img) {
        expect(img.components).toBe(test[1]);
        expect(img.alpha).toBe(test[2]);
        expect(img.bitDepth).toBe(test[3]);
      });
    });
    it(`should load from buffer ${test[0]}`, function () {
      const data = fs.readFileSync((0, _common.getImage)(`format/png/${test[0]}.png`));
      return _common.Image.load(data).then(function (img) {
        expect(img.components).toBe(test[1]);
        expect(img.alpha).toBe(test[2]);
        expect(img.bitDepth).toBe(test[3]);
      });
    });
  });
});